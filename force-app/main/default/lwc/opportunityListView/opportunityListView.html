<template>
    <lightning-card title="Opportuntities" class="slds-p-top_medium" icon-name="standard:opportunity">
        <c-fire-scheduled-batch slot="actions"></c-fire-scheduled-batch>
        <template if:true={isSelected}>
            <lightning-button
            variant="destructive" 
            label="Delete Opportunity" 
            title="Delete Opportunity" 
            onclick={openDeleteModal} 
            class="slds-m-around_medium"
            icon-name="utility:delete"
            slot="actions"
            ></lightning-button>
        </template>
        <template if:true={showDeleteModal}>
            <c-confirm-delete-modal
                onclosemodal={handleModalClose}
                onconfirmdelete={handleDelete}
            ></c-confirm-delete-modal>
        </template>
        <div style="height:380px;" class="slds-box">
            <lightning-datatable
                data={paginatedOpportunities}
                columns={columns}
                key-field="Id"
                onrowselection={handleRowSelection}
                resize-column-disabled="true"
                class="slds-table_col-bordered"
            ></lightning-datatable>
        </div>
        <div style="background: rgb(243, 243, 243); height:50px; margin-top:5px;">        
            <div class="slds-grid" style="height:4em; justify-content: center">
                <button class="slds-button slds-button_icon icon_button icon_button_disabled" title="First" role="first" onclick={handleFirst} disabled={first}>
                    <lightning-icon 
                        style="color: black;"
                        class="slds-icon-text-default"
                        icon-name="utility:jump_to_left" 
                        alternative-text="jumpToLeftArrow" 
                        size="x-small" 
                        title="large size"
                        variant="inverse"
                    ></lightning-icon>
                </button>
                <button class="slds-button slds-button_icon icon_button icon_button_disabled" title="Previous" role="previous" onclick={handlePrevious} disabled={first}>
                    <lightning-icon
                        class="slds-icon-text-default" 
                        icon-name="utility:left" 
                        alternative-text="leftArrow" 
                        size="x-small" 
                        title="large size"
                        variant="inverse"
                    ></lightning-icon>
                </button>
                <span style="margin:auto 5px auto 5px; font-weight: 500;
                            width: 30px;
                            border: rgb(116, 116, 116) 1px solid; 
                            text-align: center;">{currentPage}</span>
                <span style="margin:auto 5px auto 5px; font-weight: 500;">&nbsp;/&nbsp;{totalPages}</span>
                <button class="slds-button slds-button_icon icon_button" title="Next" role="next" onclick={handleNext} disabled={last}>
                    <lightning-icon 
                        style="color: black;"
                        class="slds-icon-text-default"
                        icon-name="utility:right" 
                        alternative-text="rightArrow" 
                        size="x-small" 
                        title="large size"
                        variant="inverse"
                    ></lightning-icon>
                </button>
                <button class="slds-button slds-button_icon icon_button" title="Last" role="last" onclick={handleLast} disabled={last}>
                    <lightning-icon
                        style="color: black;"
                        class="slds-icon-text-default"
                        icon-name="utility:jump_to_right" 
                        alternative-text="jumpToRightArrow" 
                        size="x-small" 
                        title="large size"
                        variant="inverse"
                    ></lightning-icon>
                </button>
            </div>
        </div>
        <template if:true={isSelected}>
            <!-- Pass the opportunityIds list to the child property -->
            <c-opportunity-product-list-view opportunity-ids={opportunityIds}></c-opportunity-product-list-view>
        </template>
    </lightning-card>
</template>